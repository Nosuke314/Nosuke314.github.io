<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>チャット情報集積サイト</title>
  <style>
  body {
  display: flex;
  flex-direction: column;
  align-items: center;
}

#enter-btn {
  background: black;
  color: #00ff00;
  border: 2px solid #00ff00;
  margin-left: 5px;
  padding: 0 10px;
  cursor: pointer;
  font-family: monospace;
}
    body { background: black; color: #00ff00; font-family: monospace; margin: 0; }
    #chat { width: 90%; max-width: 600px; height: 60vh; overflow-y: auto; white-space: pre-wrap; border: 2px solid #00ff00; padding: 10px; margin-top: 5vh; box-sizing: border-box; } 
    #input-area { width: 90%; max-width: 600px; display: flex; margin-top: 1vh; }
    #input { flex: 1; background: black; color: #00ff00; border: 2px solid #00ff00; font-family: monospace; padding: 5px; outline: none; box-sizing: border-box; } 
    /* スマホ用（画面幅が600px以下のとき） */
@media screen and (max-width: 600px) {
  #chat {
    height: 75vh;   /* ログ部分を少し低めに */
    font-size: 16px; /* 文字を少し小さめ */
  }
  #input {
    height: 3em;   /* 入力欄を少し低め */
    font-size: 18px; /* 入力しやすい大きさ */
    margin-bottom: 5vh; 
  }
}
  </style>
</head>
<body>
  <div id="chat"></div>
  <div id="input-area">
  <input type="text" id="input" autofocus>
  <button id="enter-btn">Enter</button>
  </div>

<script>
  // 基本の段階ステップ（全コマンド共通）
  const defaultSteps = [
    { text: "検索しています...", delay: 500 },
    { text: "候補を照合中...", delay: 1000 }
  ];

  // コマンドごとの設定
  const responses = {
    "赤菱市未解決刺殺事件": {
      steps: null,
      answer: "以下、資料になります\n(ここにリンク)"
    },
    "もずく": {
      steps: [
        { text: "データベースへアクセス中...", delay: 700 },
        { text: "一致するデータを探しています...", delay: 1200 }
      ],
      answer: "もずくはフコイダンが豊富です。"
    },
    "神山紗枝": {
      steps: null,
      answer: "神山紗枝(43)\n詳細は未だ調査中。(本件の情報について、他事件との関連も検討されているため、全情報を見るには権限者名とパスワードを打ち込んでください) 自宅にて何者かに刺されたことによる失血死。\n近所との付き合いも全く無く、被害者について詳しい情報は未だ集まっていない。\nなお、自宅からは金属製の腕輪(現在調査中)が異常な数発見された。"
    },
    "腕輪": {
      steps: null,
      answer: "以下、サイトになります\n(ここにリンク)"
    }
    "H-16号事件": {
      steps: null,
      answer: "以下、資料になります\n(ここにリンク)"
    },
    "菱村千影": {
      steps: null,
      answer: "菱村千影(28)\n赤菱市xxx町の自宅にて刺殺されているのを発見。この事件をH-16号事件と割り当てられました。最重要物品として、彼女の日記が資料保管室にて保管されています。"
    },
  };

  const aliases = {
  "かみやまさえ": "神山紗枝",
  "mekabu": "めかぶ",
  "モズク": "もずく",
  "mozuku": "もずく"
};
  
  const chat = document.getElementById("chat");
  const input = document.getElementById("input");

  function addLine(text) {
    chat.textContent += text + "\n";
    chat.scrollTop = chat.scrollHeight;
  }

  function handleCommand(cmd) {
    addLine("> " + cmd);

    // 未登録ワードならエラーメッセージ
    if (!responses[cmd]) {
      addLine("不明な入力です。");
      return;
    }

    // ステップを選択（専用ステップがあればそれを、なければデフォルト）
    const stepsToUse = responses[cmd].steps || defaultSteps;

    let totalDelay = 0;
    stepsToUse.forEach(step => {
      totalDelay += step.delay;
      setTimeout(() => addLine(step.text), totalDelay);
    });

    // 最後に答えを表示
    totalDelay += 1000;
    setTimeout(() => {
      addLine("こちらがヒットしました:\n" + responses[cmd].answer);
    }, totalDelay);
  }

  input.addEventListener("keydown", e => {
    if (e.key === "Enter") {
      const cmd = input.value.trim();
      if (cmd) handleCommand(cmd);
      input.value = "";
    }
  });
  const enterBtn = document.getElementById("enter-btn");

function submitCommand() {
  let cmd = input.value.trim();
  if (aliases[cmd]) {
    cmd = aliases[cmd];  // 本体のキーに変換
  }
  if (cmd) handleCommand(cmd);
  input.value = "";
}

enterBtn.addEventListener("click", submitCommand);
</script>
</body>
</html>
